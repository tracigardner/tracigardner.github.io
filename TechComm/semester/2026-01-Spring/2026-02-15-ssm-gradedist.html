<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Grade Distribution</title>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Chart.js Data Labels plugin -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
</head>

<body style="font-family: Arial, Helvetica, sans-serif; background: #ffffff; color: #1a1a1a;">

    <div style="max-width: 600px; max-height: 420px;margin: 0 auto;">

        <h1 style="font-size: 22px; font-weight: 700; margin: 0 0 10px 0;">
            Grade Distribution
        </h1>

        <p style="font-size: 14px; margin: 0 0 16px 0; line-height: 1.4;">
            Bar chart showing the number of students in each grade range.
        </p>

        <!-- Accessible fallback table -->
        <div style="position: absolute; left: -9999px; top: auto; width: 1px; height: 1px; overflow: hidden;">
            <table>
                <caption>Grade distribution: number of students by grade range</caption>
                <thead>
                    <tr>
                        <th scope="col">Grade range</th>
                        <th scope="col">Number of students</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th scope="row">F</th>
                        <td>7</td>
                    </tr>
                    <tr>
                        <th scope="row">D+, D, D-</th>
                        <td>7</td>
                    </tr>
                    <tr>
                        <th scope="row">C+, C, C-</th>
                        <td>37</td>
                    </tr>
                    <tr>
                        <th scope="row">B+, B, B-</th>
                        <td>20</td>
                    </tr>
                    <tr>
                        <th scope="row">A, A-</th>
                        <td>15</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Fixed-height container -->
        <div style="border: 1px solid #dddddd; border-radius: 10px; padding: 16px; height: 360px;">
            <canvas id="gradeChart" role="img" aria-label="Bar chart of grade distribution. F range: 7 students. D range: 7 students. C range: 37 students. B range: 20 students. A range: 15 students." style="width: 100%; height: 100%;"></canvas>
        </div>

    </div>

    <script>
        const labels = ["F", "D+, D, D-", "C+, C, C-", "B+, B, B-", "A, A-"];
        const counts = [7, 7, 37, 20, 15];

        const barColors = ["#75787b", "#642667", "#c64600", "#508590", "#861f41"];

        const ctx = document.getElementById("gradeChart").getContext("2d");

        Chart.register(ChartDataLabels);

        new Chart(ctx, {
            type: "bar",
            data: {
                labels: labels,
                datasets: [{
                    label: "Number of Students",
                    data: counts,
                    backgroundColor: barColors,
                    borderColor: barColors,
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                animation: false,
                plugins: {
                    legend: { display: false },
                    title: {
                        display: true,
                        text: "Number of Students by Grade Range",
                        font: { size: 16, weight: "bold" },
                        color: "#1a1a1a",
                        padding: { bottom: 12 }
                    },
                    tooltip: {
                        callbacks: {
                            label: function (context) {
                                const v = context.parsed.y;
                                return v + (v === 1 ? " student" : " students");
                            }
                        }
                    },
                    datalabels: {
                        anchor: "end",
                        align: "end",
                        offset: 4,
                        color: "#1a1a1a",
                        font: { size: 12, weight: "bold" },
                        formatter: function (value) {
                            return value;
                        }
                    }
                },
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: "Grade Range",
                            color: "#1a1a1a",
                            font: { size: 13, weight: "bold" }
                        },
                        ticks: {
                            color: "#1a1a1a",
                            maxRotation: 0,
                            minRotation: 0
                        },
                        grid: { display: false }
                    },
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: "Number of Students",
                            color: "#1a1a1a",
                            font: { size: 13, weight: "bold" }
                        },
                        ticks: {
                            color: "#1a1a1a",
                            precision: 0
                        },
                        grid: {
                            color: "#e6e6e6"
                        }
                    }
                }
            }
        });
    </script>

</body>

</html>